# Copy this file to terraform.tfvars and update with your values

aws_region     = "us-east-1"
environment    = "dev"

# S3 Bucket names (will be created automatically)
source_bucket  = "fhir-lca-persist"
target_bucket  = "fhir-ingest-analytics"
create_buckets = true  # Set to false if buckets already exist
force_destroy_buckets = true  # Allow terraform destroy even with objects (dev/test only)
s3_retention_days = 0  # Number of days to retain files (0 = keep indefinitely)
s3_filter_prefix = ""
log_retention_days = 7
lambda_zip_path = "../lambda_function.zip"

# Lambda Layer Configuration
# Option 1: Use AWS public layer (recommended, no build needed)
use_aws_public_layer = true
lambda_layer_zip_path = ""

# Option 2: Use custom layer (requires building layer first)
# use_aws_public_layer = false
# lambda_layer_zip_path = "../lambda_layer.zip"

# Glue configuration
glue_database_name = "fhir_analytics"
glue_table_name = "fhir_ingest_analytics"
glue_partition_sources = ["lca-persist", "dxa-persist"]
glue_partition_date_start = "2025-01-01"

# Lambda configuration
lambda_timeout = 300
lambda_memory_size = 512
lambda_reserved_concurrency = 0  # Set to 0 for no limit, or a number to limit concurrent executions

# Athena configuration
athena_workgroup_name = "fhir-analytics"
athena_results_retention_days = 30  # Number of days to retain Athena query results (0 = keep indefinitely)
create_athena_workgroup = true  # Set to false if workgroup already exists (use terraform import instead)

# Monitoring & Alerts
enable_cloudwatch_alarms = false  # Set to true to create CloudWatch metric alarms (requires CloudWatch PutMetricAlarm permissions)
enable_sns_alerts = false  # Set to true to create SNS topic for CloudWatch alarms (requires SNS permissions)
alert_email = ""  # Email address for alarm notifications (leave empty to disable)
error_rate_threshold = 5
enable_staleness_alarm = false  # Enable alarm if Lambda hasn't been invoked in 24 hours

